version: '2'
services:
  nginx-proxy:
    #image: jwilder/nginx-proxy
    build: .
    container_name: 0-nginx-proxy
    image: presspage/0-nginx-proxy
    ports:
      - "80:80"
    volumes:
      - /var/run/docker.sock:/tmp/docker.sock:ro
      - "./nginx/vhost:/etc/nginx/vhost.d"
      - "./nginx/lua:/usr/local/openresty/nginx/lua"
      - "./nginx/nginx.conf:/usr/local/openresty/nginx/conf/nginx.conf"

  swagger-ui:
    container_name: 0-swagger-ui
    image: schickling/swagger-ui
    environment:
      VIRTUAL_HOST: swagger-ui.presspage.dev

  socat:
    image: shipyard/docker-proxy
    container_name: 0-socat
    ports:
      - 2376:2375
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      PORT: 2375
